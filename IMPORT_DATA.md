# 导入历史数据指南

## 功能说明

现在你可以将之前下载的 JSON 格式数据导入到新账号中，恢复历史数据。

## 使用步骤

### 步骤 1: 打开导入功能

1. 登录你的账号
2. 在页面右上角，点击 **"导入数据"** 按钮
3. 会弹出导入数据对话框

### 步骤 2: 准备数据

你有两种方式导入数据：

#### 方式 A: 上传 JSON 文件（推荐）

1. 点击 **"选择文件"** 按钮
2. 选择你之前下载的 JSON 文件
3. 文件内容会自动填充到文本框中

#### 方式 B: 直接粘贴 JSON 数据

1. 打开你之前下载的 JSON 文件
2. 复制全部内容
3. 粘贴到文本框中

### 步骤 3: 导入数据

1. 确认数据已正确加载（文本框中显示 JSON 内容）
2. 点击 **"导入数据"** 按钮
3. 等待导入完成（通常几秒钟）
4. 看到成功提示后，数据就已经导入并同步到云端了

## 支持的数据格式

### 格式 1: 数组格式（最常见）

```json
[
  {
    "id": "xxx",
    "name": "T恤",
    "mainCategory": "上衣",
    "subCategory": "T恤",
    ...
  },
  ...
]
```

### 格式 2: 对象格式（包含分类）

```json
{
  "clothesItems": [...],
  "daughterClothesItems": [...]
}
```

### 格式 3: localStorage 格式

```json
{
  "grace_stuff_clothes_v1": [...],
  "grace_stuff_daughter_clothes_v1": [...]
}
```

## 注意事项

1. **重复数据处理**：
   - 如果导入的数据中已有相同 ID 的项目，会自动跳过
   - 不会覆盖现有数据

2. **数据验证**：
   - 系统会自动验证数据格式
   - 无效的数据项会被跳过
   - 只有有效的数据会被导入

3. **云端同步**：
   - 导入的数据会自动上传到 Supabase 云端
   - 其他设备登录后会自动同步这些数据

4. **数据完整性**：
   - 建议导入前先备份当前数据
   - 导入后检查数据是否正确

## 常见问题

### Q: 导入后数据在哪里？
A: 导入的数据会显示在对应的分类中（衣物/我女儿的衣物），并自动同步到云端。

### Q: 可以多次导入吗？
A: 可以，但重复的数据（相同 ID）会被自动跳过，不会重复添加。

### Q: 导入失败怎么办？
A: 
1. 检查 JSON 格式是否正确
2. 确认数据包含必要的字段（id, name 等）
3. 查看错误提示信息
4. 如果还是不行，把错误信息告诉我

### Q: 导入的数据会覆盖现有数据吗？
A: 不会。导入只会添加新数据，不会覆盖或删除现有数据。相同 ID 的数据会被跳过。

## 数据字段说明

导入的数据需要包含以下字段（至少 id 和 name）：

- `id`: 唯一标识符（字符串）
- `name`: 物品名称（字符串）
- `mainCategory`: 主分类（字符串）
- `subCategory`: 子分类（字符串）
- `season`: 季节（数组或字符串）
- `purchaseDate`: 购买日期（字符串，可选）
- `price`: 价格（数字，可选）
- `frequency`: 穿着频度（字符串，可选）
- `color`: 颜色（字符串，可选）
- `colorHex`: 颜色十六进制（字符串，可选）
- `createdAt`: 创建时间（字符串，可选）
- `endReason`: 缘尽原因（字符串，可选）
- `endDate`: 缘尽日期（字符串，可选）

## 示例数据

```json
[
  {
    "id": "123e4567-e89b-12d3-a456-426614174000",
    "name": "白色T恤",
    "mainCategory": "上衣",
    "subCategory": "T恤",
    "season": ["四季"],
    "purchaseDate": "2024-01-15",
    "price": 99.99,
    "frequency": "经常",
    "color": "白色",
    "colorHex": "#FFFFFF",
    "createdAt": "2024-01-15T10:00:00.000Z"
  }
]
```

## 需要帮助？

如果导入遇到问题：
1. 检查浏览器控制台（F12）的错误信息
2. 确认 JSON 格式正确
3. 告诉我具体的错误信息，我会帮你解决
